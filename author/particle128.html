<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>particle128's Blog - Articles by particle128</title>
  <meta name="author" content="particle128">



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://particle128.com/favicon.png" rel="icon">
  <link href="http://particle128.com/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://particle128.com/theme/js/modernizr-2.0.js"></script>
  <script src="http://particle128.com/theme/js/ender.js"></script>
  <script src="http://particle128.com/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://particle128.com/">particle128's Blog</a></h1>
    <h2>May your choices reflect your hopes, not your fears.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://particle128.com/" rel="subscribe-rss">RSS</a></li>
</ul>

<!-- TODO: add search here
<form action="" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:http://particle128.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
-->

<ul class="main-navigation">
    <li><a href="http://particle128.com/archives.html">archives</a></li>
    <li><a href="http://particle128.com/category/tech.html">tech</a></li>
    <li><a href="http://particle128.com/category/note.html">note</a></li>
    <li><a href="http://particle128.com/category/life.html">life</a></li>
      <li><a href="http://particle128.com/pages/aboutme.html">About me</a></li>
      <li><a href="http://particle128.com/pages/search.html">Search</a></li>
    <!-- TODO: add categories here? -->
</ul></nav>
  <div id="main">
    <div id="content">
<div class="blog-index">
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/smart-ptr.html">C++11专题：智能指针</a>
      </h1>
      <p class="meta"><time datetime="2015-04-24T00:00:00" pubdate>2015-04-24</time></p>
</header>

  <div class="entry-content"><h2>背景</h2>
<p>C++从C语言那里引入了指针类型，即所谓内建指针（built-in pointer）。传统的动态内存分配和释放(new &amp; delete)也都是基于指针的，容易出如下问题：</p>
<ol>
<li>忘记delete，内存/资源泄露</li>
<li>两次delete同一个指针，未定义</li>
<li>delete之后的指针继续使用，未定义</li>
</ol>
<p>而且，这些问题，很难调试，比如你delete了一个指针之后，堆上的同一块区域后来又被分配出去，那么你下次delete可能没有运行时错误，但是堆上的空闲链表却被你破坏了，之后的程序可能出现非常诡异的问题。</p>
<h2>意义</h2>
<p>智能指针，如果<em>使用得当</em>，可以防止以上三个问题，因为delete操作交给析构函数来进行(问题1、2)，并且析构之后的智能指针被自动置null(问题3)。另外，通过不同类型的智能指针，可以实现普通指针不能实现的额外好处，比如共享资源(<code>shared_ptr</code>)、专用资源(<code>unique_ptr</code>)等。</p>
<p>这里说的<em>使用得当</em>是指，按照惯例来使用智能指针：</p>
<ol>
<li>不要用同一个内建指针初始化或reset多个智能指针</li>
<li>不要delete ...</li></ol></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/smart-ptr.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/to-do-list.html">To do list</a>
      </h1>
      <p class="meta"><time datetime="2015-04-23T00:00:00" pubdate>2015-04-23</time></p>
</header>

  <div class="entry-content"><h3>next</h3>
<ul>
<li>sublime text</li>
<li></li>
</ul>
<h3>4-29(Wednesday)</h3>
<ul>
<li>OpenCourse (1.5h)</li>
<li>C++11 10 (4h)</li>
</ul>
<h3>4-28(Tuesday)</h3>
<ul>
<li><s>OpenCourse (1.5h)</s></li>
<li>Servlet 2 (4h) ---上传答辩信息</li>
<li>C++11 10  (3h) ---陪妹子</li>
</ul>
<h3>4-27(Monday)</h3>
<ul>
<li><s>Open Course (1.5h)</s></li>
<li>Servlet 1 (3h)</li>
</ul>
<h3>4-26(Sunday)</h3>
<ul>
<li>C++11 7 (2.5h)</li>
<li><s>Open Course (1.5h)</s></li>
</ul>
<h3>4-25(Saturday)</h3>
<ul>
<li><s>C++11 ...</s></li></ul></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/to-do-list.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/constexpr.html">C++11专题：constexpr类型</a>
      </h1>
      <p class="meta"><time datetime="2015-04-15T00:00:00" pubdate>2015-04-15</time></p>
</header>

  <div class="entry-content"><p>代码是最好的文档，所以，本系列主要在代码中讲解。</p>
<h2>背景</h2>
<p>C++中的const变量，包括编译时常量（compile-time constants）和运行时常量（runtime constants）。其中，编译时常量又叫常量表达式（constant expression），只有初始化式也是常量表达式的const变量才是常量表达式。例如：</p>
<div class="highlight"><pre><span class="k">const</span> <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">);</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>


<p>const变量不一定是常量表达式，所以，const变量不一定能用在一些需要常量表达式的地方，比如：</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">fun</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="mi">0</span><span class="p">;}</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">fun</span><span class="p">();</span> <span class="c1">// 非常量表达式，后面的(1)~(4)均编译出错</span>
<span class="kt">int</span> <span class="n">arr</span><span class="p">[</span><span class="n">n</span><span class="p">];</span> <span class="c1">// （1 ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/constexpr.html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/ExpertC(2).html">C专家编程-笔记(2)</a>
      </h1>
      <p class="meta"><time datetime="2015-04-11T00:00:00" pubdate>2015-04-11</time></p>
</header>

  <div class="entry-content"><h3>第五章  对链接的思考</h3>
<p><img alt="5-1" src="http://particle128.com/images/expert_c_5_1.png" /></p>
<h3>第六章  运动的诗章：运行时数据结构</h3>
<p><img alt="6-1" src="http://particle128.com/images/expert_c_6_1.png" /></p>
<h3>第七章  对内存的思考</h3>
<p><img alt="7-1" src="http://particle128.com/images/expert_c_7_1.png" /></p>
<h3>第九、十章  再论数组、再论指针</h3>
<p><img alt="9-1" src="http://particle128.com/images/expert_c_9_1.png" /></p></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/ExpertC(2).html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/theCleanCoder(4).html">The Clean Coder 笔记 (4)</a>
      </h1>
      <p class="meta"><time datetime="2015-04-06T00:00:00" pubdate>2015-04-06</time></p>
</header>

  <div class="entry-content"><h3>Chapter10 Estimation</h3>
<blockquote>
<p>The Law Of Large Numbers.<br />
If you break up a large task into many smaller tasks and estimate them independently, the sum of the estimates of the small tasks will be more accurate than a single estimate of the larger task. The reason for this increase in accurary ...</p></blockquote></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/theCleanCoder(4).html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/theCleanCoder(3).html">The Clean Coder 笔记 (3)</a>
      </h1>
      <p class="meta"><time datetime="2015-04-05T00:00:00" pubdate>2015-04-05</time></p>
</header>

  <div class="entry-content"><h3>Chapter6 Practicing</h3>
<blockquote>
<p>Turnaround Time. <br />
Doing anything quickly requires practice. Spinning around the code/test loop quickly requires you to make very quick decisions. Making decisions quickly means being able to recognize a vast number of situations and problems and simply know that to do to address them.<br />
Speed depends on ...</p></blockquote></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/theCleanCoder(3).html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/theCleanCoder(2).html">The Clean Coder 笔记 (2)</a>
      </h1>
      <p class="meta"><time datetime="2015-04-04T00:00:00" pubdate>2015-04-04</time></p>
</header>

  <div class="entry-content"><h3>Chapter4 Coding</h3>
<blockquote>
<p>Preparedness. <br />
If you are tired or distracted, do not code. You'll only wind up redoing what you did. Instead, find a way to eliminate the distractions and settle your mind. </p>
</blockquote>
<p>累或者走神的时候，别写代码。先把糟糕的状态排除或者减轻了，再来写代码。</p>
<blockquote>
<p>3 AM Code. <br />
I remember feeling so good about myself for the long ...</p></blockquote></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/theCleanCoder(2).html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/theCleanCoder(1).html">The Clean Coder 笔记 (1)</a>
      </h1>
      <p class="meta"><time datetime="2015-04-03T00:00:00" pubdate>2015-04-03</time></p>
</header>

  <div class="entry-content"><h3>Chapter1 Professionalism</h3>
<blockquote>
<p>QA Should Find Nothing.<br />
Some folks use QA as the bug catchers. They send them code that they haven't thoroughtly checked. They depend on QA to find the bugs and report them back to the developers. Indeed, some companies reward QA based on the number of bugs ...</p></blockquote></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/theCleanCoder(1).html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2015/04/ExpertC(1).html">C专家编程-笔记(1)</a>
      </h1>
      <p class="meta"><time datetime="2015-04-02T00:00:00" pubdate>2015-04-02</time></p>
</header>

  <div class="entry-content"><p>这次写C专家编程的笔记，感觉每一章的联系性比较强，就不用一行一行的文字罗列了，尝试用Xmind的流程图和思维导图来呈现。</p>
<h3>第一章  C:穿越时空的迷雾</h3>
<p><img alt="1-1" src="http://particle128.com/images/expert_c_1_1.png" />
<img alt="1-2" src="http://particle128.com/images/expert_c_1_2.png" /></p>
<h3>第二章  这不是Bug，而是语言特性</h3>
<p><img alt="2-1" src="http://particle128.com/images/expert_c_2_1.png" /></p>
<h3>第三章  分析C语言的声明</h3>
<p><img alt="3-1" src="http://particle128.com/images/expert_c_3_1.png" /></p>
<h3>第四章  令人震惊的事实：数组和指针并不相同</h3>
<p>数组/指针在不同源文件中的定义和声明，应该形式一样。</p>
<p>一个源文件下定义的数组int a[10]，在另一个源文件下声明，必须使用extern int a[]形式；<br />
一个源文件下定义的指针<code>int *a</code>，在另一个源文件下声明，必须使用<code>extern int *a</code>形式。  </p>
<p>原因：同样一条语句<code>a[0] = 1;</code>，编译器对于a是数组和a是指针的处理方式不同。</p>
<p>假设我们定义了</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</pre></div>


<p>并且a在符号表中的内容为：</p>
<div class="highlight"><pre><span class="n">var_name</span> <span class="o">|</span> <span class="n">var_address</span>
<span class="n">a ...</span></pre></div></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2015/04/ExpertC(1).html">Read On &crarr;</a>
  </footer>
  		</article>
  		<article>
<header>
      <h1 class="entry-title">
        <a href="http://particle128.com/posts/2014/12/2014-last-day.html">写在2014年的最后一天</a>
      </h1>
      <p class="meta"><time datetime="2014-12-31T00:00:00" pubdate>2014-12-31</time></p>
</header>

  <div class="entry-content"><p>今天是12.31，2014年的最后一天。崔师兄喊着实验室的人，一起去知语山吃饭。聚餐期间，我们继续保持着三句不离本行的特色，“黑”师兄、“黑”师弟，气氛非常好。</p>
<p>中间，我带领大家玩了一下“谁是卧底”，从分辨我们实验室的两大师兄，分辨Java和C++，到我们使用“谁是卧底”的安卓app，大家玩的不亦乐乎。有一次我是卧底，手里拿着“白富美”，大家手里的是“高富帅”，我在一轮还没说完的时候，就猜到了这个局面，之后，说了很多两者都一样的特质，比如“优越的生活条件”，“钱一般是从父母继承过来的”，等等…但是，xiaodong xu这货，没有啥证据就愣猜是我，还号召大家一起投我，明明其他人的说法中都有破绽，他还是坚持自己的想法。最终，我在硬撑了3轮（每一轮都竭尽全力地给自己辩护，找其他人的漏洞啊，容易吗我）之后，被他和他蛊惑了的群众投死了。事后才知道，他的确猜错了我的身份 ...</p></div>
  <footer>
    <a rel="full-article" href="http://particle128.com/posts/2014/12/2014-last-day.html">Read On &crarr;</a>
  </footer>
  		</article>
<div class="pagination">
    <a class="prev" href="http://particle128.com/author/particle1282.html">&larr; Older</a>

  <br />
</div></div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://particle128.com/posts/2015/04/smart-ptr.html">C++11专题：智能指针</a>
      </li>
      <li class="post">
          <a href="http://particle128.com/posts/2015/04/to-do-list.html">To do list</a>
      </li>
      <li class="post">
          <a href="http://particle128.com/posts/2015/04/constexpr.html">C++11专题：constexpr类型</a>
      </li>
      <li class="post">
          <a href="http://particle128.com/posts/2015/04/ExpertC(2).html">C专家编程-笔记(2)</a>
      </li>
      <li class="post">
          <a href="http://particle128.com/posts/2015/04/theCleanCoder(4).html">The Clean Coder 笔记 (4)</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://particle128.com/category/life.html">life</a></li>
        <li><a href="http://particle128.com/category/note.html">note</a></li>
        <li><a href="http://particle128.com/category/tech.html">tech</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="http://particle128.com/tag/load.html">load</a>,    <a href="http://particle128.com/tag/pelican.html">pelican</a>,    <a href="http://particle128.com/tag/expertc.html">ExpertC</a>,    <a href="http://particle128.com/tag/selenium.html">selenium</a>,    <a href="http://particle128.com/tag/distributed.html">distributed</a>,    <a href="http://particle128.com/tag/mysql.html">MySQL</a>,    <a href="http://particle128.com/tag/subprocess.html">subprocess</a>,    <a href="http://particle128.com/tag/linux.html">linux</a>,    <a href="http://particle128.com/tag/select.html">select</a>,    <a href="http://particle128.com/tag/configparser.html">ConfigParser</a>,    <a href="http://particle128.com/tag/conversion.html">conversion</a>,    <a href="http://particle128.com/tag/git.html">git</a>,    <a href="http://particle128.com/tag/core-dump.html">core dump</a>,    <a href="http://particle128.com/tag/lwp.html">lwp</a>,    <a href="http://particle128.com/tag/storage.html">storage</a>,    <a href="http://particle128.com/tag/reentrant.html">reentrant</a>,    <a href="http://particle128.com/tag/name-lookup.html">name-lookup</a>,    <a href="http://particle128.com/tag/blog.html">blog</a>,    <a href="http://particle128.com/tag/health.html">health</a>,    <a href="http://particle128.com/tag/storm.html">storm</a>,    <a href="http://particle128.com/tag/android.html">android</a>,    <a href="http://particle128.com/tag/spinlock.html">spinlock</a>,    <a href="http://particle128.com/tag/headache.html">headache</a>,    <a href="http://particle128.com/tag/map.html">map</a>,    <a href="http://particle128.com/tag/life.html">life</a>,    <a href="http://particle128.com/tag/multi-thread.html">multi-thread</a>,    <a href="http://particle128.com/tag/finance.html">finance</a>,    <a href="http://particle128.com/tag/python.html">python</a>,    <a href="http://particle128.com/tag/trident.html">trident</a>,    <a href="http://particle128.com/tag/ssl.html">ssl</a>,    <a href="http://particle128.com/tag/effectivecpp.html">EffectiveCpp</a>,    <a href="http://particle128.com/tag/link.html">link</a>,    <a href="http://particle128.com/tag/moreeffectivecpp.html">MoreEffectiveCpp</a>,    <a href="http://particle128.com/tag/cleancode.html">cleanCode</a>,    <a href="http://particle128.com/tag/thecleancoder.html">theCleanCoder</a>,    <a href="http://particle128.com/tag/c11.html">c++11</a>,    <a href="http://particle128.com/tag/encapsulation.html">encapsulation</a>,    <a href="http://particle128.com/tag/goal.html">goal</a>,    <a href="http://particle128.com/tag/logging.html">logging</a>,    <a href="http://particle128.com/tag/algorithm.html">algorithm</a>,    <a href="http://particle128.com/tag/thread.html">thread</a>,    <a href="http://particle128.com/tag/database.html">database</a>,    <a href="http://particle128.com/tag/stl.html">STL</a>,    <a href="http://particle128.com/tag/thought.html">thought</a>,    <a href="http://particle128.com/tag/vector.html">vector</a>,    <a href="http://particle128.com/tag/str.html">str</a>,    <a href="http://particle128.com/tag/cpp.html">cpp</a>,    <a href="http://particle128.com/tag/py2exe.html">py2exe</a>,    <a href="http://particle128.com/tag/user.html">user</a>  </section>


    <section>
        <h1>Blogroll</h2>
        <ul>
            <li><a href="http://docs.getpelican.com" target="_blank">Pelicon</a></li>
            <li><a href="http://www.google.com/webmasters" target="_blank">Google webmaster</a></li>
            <li><a href="https://disqus.com" target="_blank">Disqus</a></li>
            <li><a href="https://www.dnspod.cn/Domain" target="_blank">DNSPod</a></li>
            <li><a href="https://www.godaddy.com" target="_blank">Godaddy</a></li>
            <li><a href="http://www.goyouhuima.com" target="_blank">Godaddy优惠活动</a></li>
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - particle128 -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
	<script type="text/javascript">
	  var disqus_shortname = 'particle128';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>